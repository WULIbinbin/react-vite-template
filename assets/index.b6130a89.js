var bt=Object.defineProperty;var yt=(e,t,r)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ye=(e,t,r)=>(yt(e,typeof t!="symbol"?t+"":t,r),r);import{R as _t,r as T}from"./vendor.84c21b23.js";import{j as a,a as xt,b as vt,m as jt,c as Tt}from"./index.f9aa5ef2.js";import{I as We,j as $t,k as At,F as ue,l as _e,m as Ot,f as xe,n as wt,o as St}from"./layout.cecaaf06.js";import{d as Q}from"./index.df2db80c.js";class Je{constructor(){ye(this,"subs");this.subs=[]}watch(t){this.subs.push(t)}notify(t){this.subs.forEach(r=>{r(t)})}destroy(){this.subs=[]}}const ne=new Je,oe=new Je;function W({noMask:e=!1,children:t,eventData:r}){return a.exports.jsxs("div",{className:`form-sandbox__payground__item ${!e&&"form-sandbox__payground--mask"||"under-delete"}`,onClick:n=>{n.stopPropagation(),oe.notify(r)},children:[a.exports.jsx("div",{className:"form-sandbox__payground--delete",onClick:n=>{n.stopPropagation(),ne.notify(r)},children:"-"}),t]})}const{FormItem:ee}=ue;function ve(e,{renderChild:t,parent:r=null}){return e&&e.map((n,l)=>{var s,m;let c=null;const u=a.exports.jsxs(a.exports.Fragment,{children:[a.exports.jsx("span",{children:((s=n.formData)==null?void 0:s.formName)||n.compName}),a.exports.jsx("span",{className:"form-sandbox__payground__idtext",children:n.itemId})]}),d=`${((m=n.formData)==null?void 0:m.placeHolder)||n.compName}`,i={idx:l,parent:r,current:e};switch(n.compType){case"wrap":c=a.exports.jsxs(W,{eventData:i,noMask:!0,children:[a.exports.jsx("p",{children:u}),t&&t(n)]});break;case"date-picker":c=a.exports.jsx(W,{eventData:i,children:a.exports.jsx(ee,{labelAlign:"top",label:u,children:a.exports.jsx(At,{mode:"date",placeholder:d})})});break;case"selector":c=a.exports.jsx(W,{eventData:i,children:a.exports.jsx(ee,{labelAlign:"top",label:u,children:a.exports.jsx($t,{options:[{label:"\u9009\u9879\u4E00",value:"1"}],placeholder:d})})});break;default:c=a.exports.jsx(W,{eventData:i,children:a.exports.jsx(ee,{labelAlign:"top",label:u,children:a.exports.jsx(We,{readonly:!0,placeholder:d})})})}return a.exports.jsx("div",{className:"form-sandbox__payground__box","comp-type":n.compType,children:c},n.itemId)})}function Ct(){this.__data__=[],this.size=0}function Ye(e,t){return e===t||e!==e&&t!==t}function k(e,t){for(var r=e.length;r--;)if(Ye(e[r][0],t))return r;return-1}var It=Array.prototype,Dt=It.splice;function Ft(e){var t=this.__data__,r=k(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Dt.call(t,r,1),--this.size,!0}function Et(e){var t=this.__data__,r=k(t,e);return r<0?void 0:t[r][1]}function Pt(e){return k(this.__data__,e)>-1}function Nt(e,t){var r=this.__data__,n=k(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function $(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}$.prototype.clear=Ct;$.prototype.delete=Ft;$.prototype.get=Et;$.prototype.has=Pt;$.prototype.set=Nt;function Mt(){this.__data__=new $,this.size=0}function Rt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Bt(e){return this.__data__.get(e)}function Ut(e){return this.__data__.has(e)}var Lt=typeof global=="object"&&global&&global.Object===Object&&global;const qe=Lt;var Gt=typeof self=="object"&&self&&self.Object===Object&&self,zt=qe||Gt||Function("return this")();const x=zt;var Vt=x.Symbol;const P=Vt;var ke=Object.prototype,Ht=ke.hasOwnProperty,Kt=ke.toString,B=P?P.toStringTag:void 0;function Wt(e){var t=Ht.call(e,B),r=e[B];try{e[B]=void 0;var n=!0}catch{}var l=Kt.call(e);return n&&(t?e[B]=r:delete e[B]),l}var Jt=Object.prototype,Yt=Jt.toString;function qt(e){return Yt.call(e)}var kt="[object Null]",Xt="[object Undefined]",je=P?P.toStringTag:void 0;function z(e){return e==null?e===void 0?Xt:kt:je&&je in Object(e)?Wt(e):qt(e)}function V(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Zt="[object AsyncFunction]",Qt="[object Function]",er="[object GeneratorFunction]",tr="[object Proxy]";function Xe(e){if(!V(e))return!1;var t=z(e);return t==Qt||t==er||t==Zt||t==tr}var rr=x["__core-js_shared__"];const te=rr;var Te=function(){var e=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function nr(e){return!!Te&&Te in e}var or=Function.prototype,ar=or.toString;function C(e){if(e!=null){try{return ar.call(e)}catch{}try{return e+""}catch{}}return""}var sr=/[\\^$.*+?()[\]{}|]/g,cr=/^\[object .+?Constructor\]$/,ir=Function.prototype,ur=Object.prototype,lr=ir.toString,pr=ur.hasOwnProperty,dr=RegExp("^"+lr.call(pr).replace(sr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fr(e){if(!V(e)||nr(e))return!1;var t=Xe(e)?dr:cr;return t.test(C(e))}function gr(e,t){return e==null?void 0:e[t]}function I(e,t){var r=gr(e,t);return fr(r)?r:void 0}var mr=I(x,"Map");const L=mr;var hr=I(Object,"create");const G=hr;function br(){this.__data__=G?G(null):{},this.size=0}function yr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _r="__lodash_hash_undefined__",xr=Object.prototype,vr=xr.hasOwnProperty;function jr(e){var t=this.__data__;if(G){var r=t[e];return r===_r?void 0:r}return vr.call(t,e)?t[e]:void 0}var Tr=Object.prototype,$r=Tr.hasOwnProperty;function Ar(e){var t=this.__data__;return G?t[e]!==void 0:$r.call(t,e)}var Or="__lodash_hash_undefined__";function wr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=G&&t===void 0?Or:t,this}function S(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}S.prototype.clear=br;S.prototype.delete=yr;S.prototype.get=jr;S.prototype.has=Ar;S.prototype.set=wr;function Sr(){this.size=0,this.__data__={hash:new S,map:new(L||$),string:new S}}function Cr(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function X(e,t){var r=e.__data__;return Cr(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Ir(e){var t=X(this,e).delete(e);return this.size-=t?1:0,t}function Dr(e){return X(this,e).get(e)}function Fr(e){return X(this,e).has(e)}function Er(e,t){var r=X(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function M(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}M.prototype.clear=Sr;M.prototype.delete=Ir;M.prototype.get=Dr;M.prototype.has=Fr;M.prototype.set=Er;var Pr=200;function Nr(e,t){var r=this.__data__;if(r instanceof $){var n=r.__data__;if(!L||n.length<Pr-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new M(n)}return r.set(e,t),this.size=r.size,this}function R(e){var t=this.__data__=new $(e);this.size=t.size}R.prototype.clear=Mt;R.prototype.delete=Rt;R.prototype.get=Bt;R.prototype.has=Ut;R.prototype.set=Nr;function Mr(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Rr=function(){try{var e=I(Object,"defineProperty");return e({},"",{}),e}catch{}}();const $e=Rr;function Ze(e,t,r){t=="__proto__"&&$e?$e(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Br=Object.prototype,Ur=Br.hasOwnProperty;function Qe(e,t,r){var n=e[t];(!(Ur.call(e,t)&&Ye(n,r))||r===void 0&&!(t in e))&&Ze(e,t,r)}function Z(e,t,r,n){var l=!r;r||(r={});for(var c=-1,u=t.length;++c<u;){var d=t[c],i=n?n(r[d],e[d],d,r,e):void 0;i===void 0&&(i=e[d]),l?Ze(r,d,i):Qe(r,d,i)}return r}function Lr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function H(e){return e!=null&&typeof e=="object"}var Gr="[object Arguments]";function Ae(e){return H(e)&&z(e)==Gr}var et=Object.prototype,zr=et.hasOwnProperty,Vr=et.propertyIsEnumerable,Hr=Ae(function(){return arguments}())?Ae:function(e){return H(e)&&zr.call(e,"callee")&&!Vr.call(e,"callee")};const Kr=Hr;var Wr=Array.isArray;const le=Wr;function Jr(){return!1}var tt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oe=tt&&typeof module=="object"&&module&&!module.nodeType&&module,Yr=Oe&&Oe.exports===tt,we=Yr?x.Buffer:void 0,qr=we?we.isBuffer:void 0,kr=qr||Jr;const rt=kr;var Xr=9007199254740991,Zr=/^(?:0|[1-9]\d*)$/;function Qr(e,t){var r=typeof e;return t=t==null?Xr:t,!!t&&(r=="number"||r!="symbol"&&Zr.test(e))&&e>-1&&e%1==0&&e<t}var en=9007199254740991;function nt(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=en}var tn="[object Arguments]",rn="[object Array]",nn="[object Boolean]",on="[object Date]",an="[object Error]",sn="[object Function]",cn="[object Map]",un="[object Number]",ln="[object Object]",pn="[object RegExp]",dn="[object Set]",fn="[object String]",gn="[object WeakMap]",mn="[object ArrayBuffer]",hn="[object DataView]",bn="[object Float32Array]",yn="[object Float64Array]",_n="[object Int8Array]",xn="[object Int16Array]",vn="[object Int32Array]",jn="[object Uint8Array]",Tn="[object Uint8ClampedArray]",$n="[object Uint16Array]",An="[object Uint32Array]",f={};f[bn]=f[yn]=f[_n]=f[xn]=f[vn]=f[jn]=f[Tn]=f[$n]=f[An]=!0;f[tn]=f[rn]=f[mn]=f[nn]=f[hn]=f[on]=f[an]=f[sn]=f[cn]=f[un]=f[ln]=f[pn]=f[dn]=f[fn]=f[gn]=!1;function On(e){return H(e)&&nt(e.length)&&!!f[z(e)]}function pe(e){return function(t){return e(t)}}var ot=typeof exports=="object"&&exports&&!exports.nodeType&&exports,U=ot&&typeof module=="object"&&module&&!module.nodeType&&module,wn=U&&U.exports===ot,re=wn&&qe.process,Sn=function(){try{var e=U&&U.require&&U.require("util").types;return e||re&&re.binding&&re.binding("util")}catch{}}();const N=Sn;var Se=N&&N.isTypedArray,Cn=Se?pe(Se):On;const In=Cn;var Dn=Object.prototype,Fn=Dn.hasOwnProperty;function at(e,t){var r=le(e),n=!r&&Kr(e),l=!r&&!n&&rt(e),c=!r&&!n&&!l&&In(e),u=r||n||l||c,d=u?Lr(e.length,String):[],i=d.length;for(var s in e)(t||Fn.call(e,s))&&!(u&&(s=="length"||l&&(s=="offset"||s=="parent")||c&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||Qr(s,i)))&&d.push(s);return d}var En=Object.prototype;function de(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||En;return e===r}function st(e,t){return function(r){return e(t(r))}}var Pn=st(Object.keys,Object);const Nn=Pn;var Mn=Object.prototype,Rn=Mn.hasOwnProperty;function Bn(e){if(!de(e))return Nn(e);var t=[];for(var r in Object(e))Rn.call(e,r)&&r!="constructor"&&t.push(r);return t}function ct(e){return e!=null&&nt(e.length)&&!Xe(e)}function fe(e){return ct(e)?at(e):Bn(e)}function Un(e,t){return e&&Z(t,fe(t),e)}function Ln(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var Gn=Object.prototype,zn=Gn.hasOwnProperty;function Vn(e){if(!V(e))return Ln(e);var t=de(e),r=[];for(var n in e)n=="constructor"&&(t||!zn.call(e,n))||r.push(n);return r}function ge(e){return ct(e)?at(e,!0):Vn(e)}function Hn(e,t){return e&&Z(t,ge(t),e)}var it=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ce=it&&typeof module=="object"&&module&&!module.nodeType&&module,Kn=Ce&&Ce.exports===it,Ie=Kn?x.Buffer:void 0,De=Ie?Ie.allocUnsafe:void 0;function Wn(e,t){if(t)return e.slice();var r=e.length,n=De?De(r):new e.constructor(r);return e.copy(n),n}function Jn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Yn(e,t){for(var r=-1,n=e==null?0:e.length,l=0,c=[];++r<n;){var u=e[r];t(u,r,e)&&(c[l++]=u)}return c}function ut(){return[]}var qn=Object.prototype,kn=qn.propertyIsEnumerable,Fe=Object.getOwnPropertySymbols,Xn=Fe?function(e){return e==null?[]:(e=Object(e),Yn(Fe(e),function(t){return kn.call(e,t)}))}:ut;const me=Xn;function Zn(e,t){return Z(e,me(e),t)}function lt(e,t){for(var r=-1,n=t.length,l=e.length;++r<n;)e[l+r]=t[r];return e}var Qn=st(Object.getPrototypeOf,Object);const pt=Qn;var eo=Object.getOwnPropertySymbols,to=eo?function(e){for(var t=[];e;)lt(t,me(e)),e=pt(e);return t}:ut;const dt=to;function ro(e,t){return Z(e,dt(e),t)}function ft(e,t,r){var n=t(e);return le(e)?n:lt(n,r(e))}function no(e){return ft(e,fe,me)}function oo(e){return ft(e,ge,dt)}var ao=I(x,"DataView");const ae=ao;var so=I(x,"Promise");const se=so;var co=I(x,"Set");const ce=co;var io=I(x,"WeakMap");const ie=io;var Ee="[object Map]",uo="[object Object]",Pe="[object Promise]",Ne="[object Set]",Me="[object WeakMap]",Re="[object DataView]",lo=C(ae),po=C(L),fo=C(se),go=C(ce),mo=C(ie),O=z;(ae&&O(new ae(new ArrayBuffer(1)))!=Re||L&&O(new L)!=Ee||se&&O(se.resolve())!=Pe||ce&&O(new ce)!=Ne||ie&&O(new ie)!=Me)&&(O=function(e){var t=z(e),r=t==uo?e.constructor:void 0,n=r?C(r):"";if(n)switch(n){case lo:return Re;case po:return Ee;case fo:return Pe;case go:return Ne;case mo:return Me}return t});const he=O;var ho=Object.prototype,bo=ho.hasOwnProperty;function yo(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&bo.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _o=x.Uint8Array;const Be=_o;function be(e){var t=new e.constructor(e.byteLength);return new Be(t).set(new Be(e)),t}function xo(e,t){var r=t?be(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var vo=/\w*$/;function jo(e){var t=new e.constructor(e.source,vo.exec(e));return t.lastIndex=e.lastIndex,t}var Ue=P?P.prototype:void 0,Le=Ue?Ue.valueOf:void 0;function To(e){return Le?Object(Le.call(e)):{}}function $o(e,t){var r=t?be(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var Ao="[object Boolean]",Oo="[object Date]",wo="[object Map]",So="[object Number]",Co="[object RegExp]",Io="[object Set]",Do="[object String]",Fo="[object Symbol]",Eo="[object ArrayBuffer]",Po="[object DataView]",No="[object Float32Array]",Mo="[object Float64Array]",Ro="[object Int8Array]",Bo="[object Int16Array]",Uo="[object Int32Array]",Lo="[object Uint8Array]",Go="[object Uint8ClampedArray]",zo="[object Uint16Array]",Vo="[object Uint32Array]";function Ho(e,t,r){var n=e.constructor;switch(t){case Eo:return be(e);case Ao:case Oo:return new n(+e);case Po:return xo(e,r);case No:case Mo:case Ro:case Bo:case Uo:case Lo:case Go:case zo:case Vo:return $o(e,r);case wo:return new n;case So:case Do:return new n(e);case Co:return jo(e);case Io:return new n;case Fo:return To(e)}}var Ge=Object.create,Ko=function(){function e(){}return function(t){if(!V(t))return{};if(Ge)return Ge(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Wo=Ko;function Jo(e){return typeof e.constructor=="function"&&!de(e)?Wo(pt(e)):{}}var Yo="[object Map]";function qo(e){return H(e)&&he(e)==Yo}var ze=N&&N.isMap,ko=ze?pe(ze):qo;const Xo=ko;var Zo="[object Set]";function Qo(e){return H(e)&&he(e)==Zo}var Ve=N&&N.isSet,ea=Ve?pe(Ve):Qo;const ta=ea;var ra=1,na=2,oa=4,gt="[object Arguments]",aa="[object Array]",sa="[object Boolean]",ca="[object Date]",ia="[object Error]",mt="[object Function]",ua="[object GeneratorFunction]",la="[object Map]",pa="[object Number]",ht="[object Object]",da="[object RegExp]",fa="[object Set]",ga="[object String]",ma="[object Symbol]",ha="[object WeakMap]",ba="[object ArrayBuffer]",ya="[object DataView]",_a="[object Float32Array]",xa="[object Float64Array]",va="[object Int8Array]",ja="[object Int16Array]",Ta="[object Int32Array]",$a="[object Uint8Array]",Aa="[object Uint8ClampedArray]",Oa="[object Uint16Array]",wa="[object Uint32Array]",p={};p[gt]=p[aa]=p[ba]=p[ya]=p[sa]=p[ca]=p[_a]=p[xa]=p[va]=p[ja]=p[Ta]=p[la]=p[pa]=p[ht]=p[da]=p[fa]=p[ga]=p[ma]=p[$a]=p[Aa]=p[Oa]=p[wa]=!0;p[ia]=p[mt]=p[ha]=!1;function J(e,t,r,n,l,c){var u,d=t&ra,i=t&na,s=t&oa;if(r&&(u=l?r(e,n,l,c):r(e)),u!==void 0)return u;if(!V(e))return e;var m=le(e);if(m){if(u=yo(e),!d)return Jn(e,u)}else{var h=he(e),v=h==mt||h==ua;if(rt(e))return Wn(e,d);if(h==ht||h==gt||v&&!l){if(u=i||v?{}:Jo(e),!d)return i?ro(e,Hn(u,e)):Zn(e,Un(u,e))}else{if(!p[h])return l?e:{};u=Ho(e,h,d)}}c||(c=new R);var D=c.get(e);if(D)return D;c.set(e,u),ta(e)?e.forEach(function(y){u.add(J(y,t,r,y,e,c))}):Xo(e)&&e.forEach(function(y,o){u.set(o,J(y,t,r,o,e,c))});var F=s?i?oo:no:i?ge:fe,E=m?void 0:F(e);return Mr(E||e,function(y,o){E&&(o=y,y=e[o]),Qe(u,o,J(y,t,r,o,e,c))}),u}var Sa=1,Ca=4;function Y(e){return J(e,Sa|Ca)}var w=(e=>(e.ON_ADD="add",e.ON_REMOVE="remove",e.ON_UPDATE="update",e.ON_RESET="reset",e))(w||{});const Ia=_t.createContext(null),Da=[{label:"\u5E03\u5C40",type:"radio",name:"layout",defaultValue:"single",options:[{label:"\u5355\u5217",value:"single"},{label:"\u591A\u5217",value:"multi"}]}],Fa=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Ea=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Pa=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Na={wrap:Da,input:Fa,selector:Ea,"data-picker":Pa};const{FormItem:Ma}=ue;function Ra({onClose:e,data:t,visible:r}){const[n,l]=T.exports.useState({}),c=T.exports.useRef(),u=async()=>{const i=c.current,[,s]=await xt(i.validate());if(s===!0){const m=i.getFieldsValue(!0);Object.assign(n.formData,m),console.log("\u8868\u5355\u9879\u4FEE\u6539\uFF1A",n),e()}},d=T.exports.useMemo(()=>{var i;return(i=Na[n.compType])==null?void 0:i.map((s,m)=>{let h=null;const{formData:v,itemId:D}=n,F=`${D}-dispose-${m}`,{options:E,defaultValue:y}=s;switch(s.type){case"radio":h=a.exports.jsx(_e.Group,{value:v[s.name]||y,children:E.map((o,g)=>a.exports.jsx(_e,{defaultChecked:v[s.name]===o.value,value:o.value,children:o.label},`${F}-${o.value}`))});break;default:h=a.exports.jsx(We,{})}return a.exports.jsx(Ma,{label:s.label,name:s.name,children:h},F)})},[n.compType]);return T.exports.useEffect(()=>{const{idx:i,current:s}=t;if(!s)return;const m=c.current,{formData:h}=s[i];console.log("\u5F53\u524D\u8868\u5355\uFF1A",s[i]),l(s[i]),h&&m.setFieldsValue(h)},[t,n.formData]),a.exports.jsx(Ot,{header:`${n.compName}:${n.itemId}`,visible:r,onClose:e,onConfirm:u,children:r&&a.exports.jsx("div",{className:"form-sandbox__dispose",children:a.exports.jsx(ue,{ref:c,labelAlign:"top",labelWidth:80,children:(n==null?void 0:n.compType)&&d})})})}const Ba=[{compId:"2",compName:"\u8F93\u5165\u6846",compType:"input",chosen:!1,selected:!1,itemId:"formId-Q2rezGsi",parentId:null,nodeIndex:0,formData:{},children:[]},{compId:"3",compName:"\u4E0B\u62C9\u9009\u62E9\u5668",compType:"selector",chosen:!1,selected:!1,itemId:"formId-Ed2MGdaZ",parentId:null,nodeIndex:1,formData:{},children:[]}];const Ua=[{compId:"1",compName:"\u6805\u683C",compType:"wrap"},{compId:"2",compName:"\u8F93\u5165\u6846",compType:"input"},{compId:"3",compName:"\u4E0B\u62C9\u9009\u62E9\u5668",compType:"selector"},{compId:"4",compName:"\u65E5\u671F\u9009\u62E9\u5668",compType:"date-picker"}],He="container_data",Ke=Y(Ba),La={value:[],hash:{}};let q=[];function Ga(e,t){let r;const{eventType:n="",selected:l,toDelete:c}=t;switch(n){case w.ON_RESET:r=l;break;case w.ON_REMOVE:const i=s=>s.itemId===c.itemId&&s.parentId===c.parentId;r=q.filter(s=>!i(s));break;default:r=[...q.filter(s=>l.findIndex(m=>m.itemId===s.itemId)===-1),...l]}q=r;const[u,d]=vt(r,null);return{value:u,hash:d}}function Ja(){const[e,t]=T.exports.useState(Ua),[r,n]=T.exports.useReducer(Ga,La),[l,c]=T.exports.useState(!1),[u,d]=T.exports.useState({}),i=(o,g,b,_)=>{const j=b&&Y(b)||null,A=o.length&&Y(o)||[],K=jt(A,j);n({eventType:g,selected:K,toDelete:_})},s=o=>{const g=o.getAttribute("comp-type");return e.find(_=>_.compType===g)},m=(o,g,b)=>{const{item:_,newDraggableIndex:j}=o,A=s(_);if(!A)return;const K=g;K.splice(j,0,A),i(K,w.ON_ADD,b)},h=(o,g,b)=>{const{newDraggableIndex:_,oldDraggableIndex:j}=o,A=Tt(Y(g),j,_);i(A,w.ON_UPDATE,b)},v=(o,g,b)=>{const{oldDraggableIndex:_}=o,j=g,A=j[_];j.splice(_,1),i(j,w.ON_REMOVE,b,A)},D=()=>{n({eventType:w.ON_RESET,selected:Ke})},F=()=>{sessionStorage.setItem(He,JSON.stringify(r.value))},E=()=>{const o=wt.confirm({header:"\u63D0\u793A",body:"\u786E\u8BA4\u91CD\u7F6E\u8868\u5355\u5417\uFF1F",theme:"warning",onConfirm:()=>{D(),o.hide()},onClose:()=>{o.hide()}})};function y(o){var g;return a.exports.jsx(Q.exports.ReactSortable,{tag:"div",className:St("form-sandbox__payground__wrap",`form-sandbox__payground__wrap--direction--${(g=o.formData)==null?void 0:g.layout}`),group:{name:"component",pull:!0,put:!0},swap:!0,direction:"horizontal",fallbackOnBody:!0,swapThreshold:1,animation:200,list:o.children,onUpdate:b=>{console.log("child-onUpdate\u64CD\u4F5C------------------->"),h(b,o.children,o)},onAdd:b=>{console.log("child-onAdd\u64CD\u4F5C------------------->"),m(b,o.children,o)},onRemove:b=>{console.log("child-onRemove\u64CD\u4F5C------------------->"),v(b,o.children,o)},setList:()=>{},children:o.children&&ve(o.children,{renderChild:y,parent:o})||null})}return T.exports.useEffect(()=>{ne.watch(g=>{console.log("\u5220\u9664\u64CD\u4F5C\u6765\u6E90\uFF1A",g),v({oldDraggableIndex:g.idx},g.current,g.parent)}),oe.watch(g=>{c(!0),d(g)});const o=sessionStorage.getItem(He);return i(o&&JSON.parse(o)||Ke),()=>{q=[],i([]),ne.destroy(),oe.destroy()}},[]),a.exports.jsx(Ia.Provider,{value:{containerState:r},children:a.exports.jsxs("div",{className:"form-sandbox__main",children:[a.exports.jsxs("div",{className:"form-sandbox__components",children:[a.exports.jsx("p",{className:"form-sandbox__components--title",children:"\u9009\u62E9\u7EC4\u4EF6"}),a.exports.jsx(Q.exports.ReactSortable,{tag:"div",group:{name:"component",pull:"clone",put:!1},sort:!1,list:e,setList:o=>{t(o)},children:e.map(o=>a.exports.jsx("div",{className:`form-sandbox__components__item form-sandbox__components--${o.compType}`,"comp-type":o.compType,children:o.compName},o.compId))})]}),a.exports.jsxs("div",{className:"form-sandbox__content",children:[a.exports.jsxs("div",{className:"form-sandbox__operation",children:[a.exports.jsx(xe,{theme:"primary",type:"submit",style:{marginRight:10},onClick:F,children:"\u4FDD\u5B58"}),a.exports.jsx(xe,{type:"reset",onClick:E,children:"\u91CD\u7F6E"})]}),a.exports.jsx(Q.exports.ReactSortable,{tag:"div",className:"form-sandbox__payground",group:{name:"component",pull:!0,put:!0},swap:!0,direction:"horizontal",fallbackOnBody:!0,swapThreshold:1,animation:200,list:r.value,onUpdate:o=>{console.log("container-onUpdate\u64CD\u4F5C------------------->"),h(o,r.value,null)},onAdd:o=>{console.log("container-onAdd\u64CD\u4F5C------------------->",o),m(o,r.value,null)},onRemove:o=>{console.log("container-onRemove\u64CD\u4F5C------------------->"),v(o,r.value,null)},setList:()=>{},children:ve(r.value,{renderChild:y})})]}),a.exports.jsx(Ra,{visible:l,data:u,onClose:()=>{c(!1)}})]})})}export{Ja as default};
