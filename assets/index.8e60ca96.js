var yt=Object.defineProperty;var xt=(e,t,r)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var _e=(e,t,r)=>(xt(e,typeof t!="symbol"?t+"":t,r),r);import{R as _t,r as $}from"./vendor.84c21b23.js";import{j as a,a as vt,b as jt,m as Tt,c as $t}from"./index.7101eafa.js";import{I as Je,j as At,k as wt,F as pe,l as ve,m as Ot,f as ee,n as St,o as Ct}from"./layout.cecaaf06.js";import{d as te}from"./index.df2db80c.js";class Ye{constructor(){_e(this,"subs");this.subs=[]}watch(t){this.subs.push(t)}notify(t){this.subs.forEach(r=>{r(t)})}destroy(){this.subs=[]}}const ae=new Ye,se=new Ye;function J({noMask:e=!1,children:t,eventData:r}){return a.exports.jsxs("div",{className:`form-sandbox__payground__item ${!e&&"form-sandbox__payground--mask"||"under-delete"}`,onClick:n=>{n.stopPropagation(),se.notify(r)},children:[a.exports.jsx("div",{className:"form-sandbox__payground--delete",onClick:n=>{n.stopPropagation(),ae.notify(r)},children:"-"}),t]})}const{FormItem:re}=pe;function je(e,{renderChild:t,parent:r=null}){return e&&e.map((n,l)=>{var s,m;let c=null;const u=a.exports.jsxs(a.exports.Fragment,{children:[a.exports.jsx("span",{children:((s=n.formData)==null?void 0:s.formName)||n.compName}),a.exports.jsx("span",{className:"form-sandbox__payground__idtext",children:n.itemId})]}),d=`${((m=n.formData)==null?void 0:m.placeHolder)||n.compName}`,i={idx:l,parent:r,current:e};switch(n.compType){case"wrap":c=a.exports.jsxs(J,{eventData:i,noMask:!0,children:[a.exports.jsx("p",{children:u}),t&&t(n)]});break;case"date-picker":c=a.exports.jsx(J,{eventData:i,children:a.exports.jsx(re,{labelAlign:"top",label:u,children:a.exports.jsx(wt,{mode:"date",placeholder:d})})});break;case"selector":c=a.exports.jsx(J,{eventData:i,children:a.exports.jsx(re,{labelAlign:"top",label:u,children:a.exports.jsx(At,{options:[{label:"\u9009\u9879\u4E00",value:"1"}],placeholder:d})})});break;default:c=a.exports.jsx(J,{eventData:i,children:a.exports.jsx(re,{labelAlign:"top",label:u,children:a.exports.jsx(Je,{readonly:!0,placeholder:d})})})}return a.exports.jsx("div",{className:"form-sandbox__payground__box","comp-type":n.compType,children:c},n.itemId)})}function It(){this.__data__=[],this.size=0}function ke(e,t){return e===t||e!==e&&t!==t}function X(e,t){for(var r=e.length;r--;)if(ke(e[r][0],t))return r;return-1}var Dt=Array.prototype,Ft=Dt.splice;function Et(e){var t=this.__data__,r=X(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Ft.call(t,r,1),--this.size,!0}function Pt(e){var t=this.__data__,r=X(t,e);return r<0?void 0:t[r][1]}function Nt(e){return X(this.__data__,e)>-1}function Rt(e,t){var r=this.__data__,n=X(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function A(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}A.prototype.clear=It;A.prototype.delete=Et;A.prototype.get=Pt;A.prototype.has=Nt;A.prototype.set=Rt;function Mt(){this.__data__=new A,this.size=0}function Bt(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Ut(e){return this.__data__.get(e)}function Lt(e){return this.__data__.has(e)}var Gt=typeof global=="object"&&global&&global.Object===Object&&global;const qe=Gt;var zt=typeof self=="object"&&self&&self.Object===Object&&self,Vt=qe||zt||Function("return this")();const v=Vt;var Ht=v.Symbol;const N=Ht;var Xe=Object.prototype,Kt=Xe.hasOwnProperty,Wt=Xe.toString,U=N?N.toStringTag:void 0;function Jt(e){var t=Kt.call(e,U),r=e[U];try{e[U]=void 0;var n=!0}catch{}var l=Wt.call(e);return n&&(t?e[U]=r:delete e[U]),l}var Yt=Object.prototype,kt=Yt.toString;function qt(e){return kt.call(e)}var Xt="[object Null]",Zt="[object Undefined]",Te=N?N.toStringTag:void 0;function V(e){return e==null?e===void 0?Zt:Xt:Te&&Te in Object(e)?Jt(e):qt(e)}function H(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Qt="[object AsyncFunction]",er="[object Function]",tr="[object GeneratorFunction]",rr="[object Proxy]";function Ze(e){if(!H(e))return!1;var t=V(e);return t==er||t==tr||t==Qt||t==rr}var nr=v["__core-js_shared__"];const ne=nr;var $e=function(){var e=/[^.]+$/.exec(ne&&ne.keys&&ne.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function or(e){return!!$e&&$e in e}var ar=Function.prototype,sr=ar.toString;function I(e){if(e!=null){try{return sr.call(e)}catch{}try{return e+""}catch{}}return""}var cr=/[\\^$.*+?()[\]{}|]/g,ir=/^\[object .+?Constructor\]$/,ur=Function.prototype,lr=Object.prototype,pr=ur.toString,dr=lr.hasOwnProperty,fr=RegExp("^"+pr.call(dr).replace(cr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function gr(e){if(!H(e)||or(e))return!1;var t=Ze(e)?fr:ir;return t.test(I(e))}function mr(e,t){return e==null?void 0:e[t]}function D(e,t){var r=mr(e,t);return gr(r)?r:void 0}var hr=D(v,"Map");const G=hr;var br=D(Object,"create");const z=br;function yr(){this.__data__=z?z(null):{},this.size=0}function xr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _r="__lodash_hash_undefined__",vr=Object.prototype,jr=vr.hasOwnProperty;function Tr(e){var t=this.__data__;if(z){var r=t[e];return r===_r?void 0:r}return jr.call(t,e)?t[e]:void 0}var $r=Object.prototype,Ar=$r.hasOwnProperty;function wr(e){var t=this.__data__;return z?t[e]!==void 0:Ar.call(t,e)}var Or="__lodash_hash_undefined__";function Sr(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=z&&t===void 0?Or:t,this}function C(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}C.prototype.clear=yr;C.prototype.delete=xr;C.prototype.get=Tr;C.prototype.has=wr;C.prototype.set=Sr;function Cr(){this.size=0,this.__data__={hash:new C,map:new(G||A),string:new C}}function Ir(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Z(e,t){var r=e.__data__;return Ir(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Dr(e){var t=Z(this,e).delete(e);return this.size-=t?1:0,t}function Fr(e){return Z(this,e).get(e)}function Er(e){return Z(this,e).has(e)}function Pr(e,t){var r=Z(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function M(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}M.prototype.clear=Cr;M.prototype.delete=Dr;M.prototype.get=Fr;M.prototype.has=Er;M.prototype.set=Pr;var Nr=200;function Rr(e,t){var r=this.__data__;if(r instanceof A){var n=r.__data__;if(!G||n.length<Nr-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new M(n)}return r.set(e,t),this.size=r.size,this}function B(e){var t=this.__data__=new A(e);this.size=t.size}B.prototype.clear=Mt;B.prototype.delete=Bt;B.prototype.get=Ut;B.prototype.has=Lt;B.prototype.set=Rr;function Mr(e,t){for(var r=-1,n=e==null?0:e.length;++r<n&&t(e[r],r,e)!==!1;);return e}var Br=function(){try{var e=D(Object,"defineProperty");return e({},"",{}),e}catch{}}();const Ae=Br;function Qe(e,t,r){t=="__proto__"&&Ae?Ae(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Ur=Object.prototype,Lr=Ur.hasOwnProperty;function et(e,t,r){var n=e[t];(!(Lr.call(e,t)&&ke(n,r))||r===void 0&&!(t in e))&&Qe(e,t,r)}function Q(e,t,r,n){var l=!r;r||(r={});for(var c=-1,u=t.length;++c<u;){var d=t[c],i=n?n(r[d],e[d],d,r,e):void 0;i===void 0&&(i=e[d]),l?Qe(r,d,i):et(r,d,i)}return r}function Gr(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function K(e){return e!=null&&typeof e=="object"}var zr="[object Arguments]";function we(e){return K(e)&&V(e)==zr}var tt=Object.prototype,Vr=tt.hasOwnProperty,Hr=tt.propertyIsEnumerable,Kr=we(function(){return arguments}())?we:function(e){return K(e)&&Vr.call(e,"callee")&&!Hr.call(e,"callee")};const Wr=Kr;var Jr=Array.isArray;const de=Jr;function Yr(){return!1}var rt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oe=rt&&typeof module=="object"&&module&&!module.nodeType&&module,kr=Oe&&Oe.exports===rt,Se=kr?v.Buffer:void 0,qr=Se?Se.isBuffer:void 0,Xr=qr||Yr;const nt=Xr;var Zr=9007199254740991,Qr=/^(?:0|[1-9]\d*)$/;function en(e,t){var r=typeof e;return t=t==null?Zr:t,!!t&&(r=="number"||r!="symbol"&&Qr.test(e))&&e>-1&&e%1==0&&e<t}var tn=9007199254740991;function ot(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=tn}var rn="[object Arguments]",nn="[object Array]",on="[object Boolean]",an="[object Date]",sn="[object Error]",cn="[object Function]",un="[object Map]",ln="[object Number]",pn="[object Object]",dn="[object RegExp]",fn="[object Set]",gn="[object String]",mn="[object WeakMap]",hn="[object ArrayBuffer]",bn="[object DataView]",yn="[object Float32Array]",xn="[object Float64Array]",_n="[object Int8Array]",vn="[object Int16Array]",jn="[object Int32Array]",Tn="[object Uint8Array]",$n="[object Uint8ClampedArray]",An="[object Uint16Array]",wn="[object Uint32Array]",f={};f[yn]=f[xn]=f[_n]=f[vn]=f[jn]=f[Tn]=f[$n]=f[An]=f[wn]=!0;f[rn]=f[nn]=f[hn]=f[on]=f[bn]=f[an]=f[sn]=f[cn]=f[un]=f[ln]=f[pn]=f[dn]=f[fn]=f[gn]=f[mn]=!1;function On(e){return K(e)&&ot(e.length)&&!!f[V(e)]}function fe(e){return function(t){return e(t)}}var at=typeof exports=="object"&&exports&&!exports.nodeType&&exports,L=at&&typeof module=="object"&&module&&!module.nodeType&&module,Sn=L&&L.exports===at,oe=Sn&&qe.process,Cn=function(){try{var e=L&&L.require&&L.require("util").types;return e||oe&&oe.binding&&oe.binding("util")}catch{}}();const R=Cn;var Ce=R&&R.isTypedArray,In=Ce?fe(Ce):On;const Dn=In;var Fn=Object.prototype,En=Fn.hasOwnProperty;function st(e,t){var r=de(e),n=!r&&Wr(e),l=!r&&!n&&nt(e),c=!r&&!n&&!l&&Dn(e),u=r||n||l||c,d=u?Gr(e.length,String):[],i=d.length;for(var s in e)(t||En.call(e,s))&&!(u&&(s=="length"||l&&(s=="offset"||s=="parent")||c&&(s=="buffer"||s=="byteLength"||s=="byteOffset")||en(s,i)))&&d.push(s);return d}var Pn=Object.prototype;function ge(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Pn;return e===r}function ct(e,t){return function(r){return e(t(r))}}var Nn=ct(Object.keys,Object);const Rn=Nn;var Mn=Object.prototype,Bn=Mn.hasOwnProperty;function Un(e){if(!ge(e))return Rn(e);var t=[];for(var r in Object(e))Bn.call(e,r)&&r!="constructor"&&t.push(r);return t}function it(e){return e!=null&&ot(e.length)&&!Ze(e)}function me(e){return it(e)?st(e):Un(e)}function Ln(e,t){return e&&Q(t,me(t),e)}function Gn(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var zn=Object.prototype,Vn=zn.hasOwnProperty;function Hn(e){if(!H(e))return Gn(e);var t=ge(e),r=[];for(var n in e)n=="constructor"&&(t||!Vn.call(e,n))||r.push(n);return r}function he(e){return it(e)?st(e,!0):Hn(e)}function Kn(e,t){return e&&Q(t,he(t),e)}var ut=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ie=ut&&typeof module=="object"&&module&&!module.nodeType&&module,Wn=Ie&&Ie.exports===ut,De=Wn?v.Buffer:void 0,Fe=De?De.allocUnsafe:void 0;function Jn(e,t){if(t)return e.slice();var r=e.length,n=Fe?Fe(r):new e.constructor(r);return e.copy(n),n}function Yn(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function kn(e,t){for(var r=-1,n=e==null?0:e.length,l=0,c=[];++r<n;){var u=e[r];t(u,r,e)&&(c[l++]=u)}return c}function lt(){return[]}var qn=Object.prototype,Xn=qn.propertyIsEnumerable,Ee=Object.getOwnPropertySymbols,Zn=Ee?function(e){return e==null?[]:(e=Object(e),kn(Ee(e),function(t){return Xn.call(e,t)}))}:lt;const be=Zn;function Qn(e,t){return Q(e,be(e),t)}function pt(e,t){for(var r=-1,n=t.length,l=e.length;++r<n;)e[l+r]=t[r];return e}var eo=ct(Object.getPrototypeOf,Object);const dt=eo;var to=Object.getOwnPropertySymbols,ro=to?function(e){for(var t=[];e;)pt(t,be(e)),e=dt(e);return t}:lt;const ft=ro;function no(e,t){return Q(e,ft(e),t)}function gt(e,t,r){var n=t(e);return de(e)?n:pt(n,r(e))}function oo(e){return gt(e,me,be)}function ao(e){return gt(e,he,ft)}var so=D(v,"DataView");const ce=so;var co=D(v,"Promise");const ie=co;var io=D(v,"Set");const ue=io;var uo=D(v,"WeakMap");const le=uo;var Pe="[object Map]",lo="[object Object]",Ne="[object Promise]",Re="[object Set]",Me="[object WeakMap]",Be="[object DataView]",po=I(ce),fo=I(G),go=I(ie),mo=I(ue),ho=I(le),O=V;(ce&&O(new ce(new ArrayBuffer(1)))!=Be||G&&O(new G)!=Pe||ie&&O(ie.resolve())!=Ne||ue&&O(new ue)!=Re||le&&O(new le)!=Me)&&(O=function(e){var t=V(e),r=t==lo?e.constructor:void 0,n=r?I(r):"";if(n)switch(n){case po:return Be;case fo:return Pe;case go:return Ne;case mo:return Re;case ho:return Me}return t});const ye=O;var bo=Object.prototype,yo=bo.hasOwnProperty;function xo(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&yo.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var _o=v.Uint8Array;const Ue=_o;function xe(e){var t=new e.constructor(e.byteLength);return new Ue(t).set(new Ue(e)),t}function vo(e,t){var r=t?xe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var jo=/\w*$/;function To(e){var t=new e.constructor(e.source,jo.exec(e));return t.lastIndex=e.lastIndex,t}var Le=N?N.prototype:void 0,Ge=Le?Le.valueOf:void 0;function $o(e){return Ge?Object(Ge.call(e)):{}}function Ao(e,t){var r=t?xe(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var wo="[object Boolean]",Oo="[object Date]",So="[object Map]",Co="[object Number]",Io="[object RegExp]",Do="[object Set]",Fo="[object String]",Eo="[object Symbol]",Po="[object ArrayBuffer]",No="[object DataView]",Ro="[object Float32Array]",Mo="[object Float64Array]",Bo="[object Int8Array]",Uo="[object Int16Array]",Lo="[object Int32Array]",Go="[object Uint8Array]",zo="[object Uint8ClampedArray]",Vo="[object Uint16Array]",Ho="[object Uint32Array]";function Ko(e,t,r){var n=e.constructor;switch(t){case Po:return xe(e);case wo:case Oo:return new n(+e);case No:return vo(e,r);case Ro:case Mo:case Bo:case Uo:case Lo:case Go:case zo:case Vo:case Ho:return Ao(e,r);case So:return new n;case Co:case Fo:return new n(e);case Io:return To(e);case Do:return new n;case Eo:return $o(e)}}var ze=Object.create,Wo=function(){function e(){}return function(t){if(!H(t))return{};if(ze)return ze(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();const Jo=Wo;function Yo(e){return typeof e.constructor=="function"&&!ge(e)?Jo(dt(e)):{}}var ko="[object Map]";function qo(e){return K(e)&&ye(e)==ko}var Ve=R&&R.isMap,Xo=Ve?fe(Ve):qo;const Zo=Xo;var Qo="[object Set]";function ea(e){return K(e)&&ye(e)==Qo}var He=R&&R.isSet,ta=He?fe(He):ea;const ra=ta;var na=1,oa=2,aa=4,mt="[object Arguments]",sa="[object Array]",ca="[object Boolean]",ia="[object Date]",ua="[object Error]",ht="[object Function]",la="[object GeneratorFunction]",pa="[object Map]",da="[object Number]",bt="[object Object]",fa="[object RegExp]",ga="[object Set]",ma="[object String]",ha="[object Symbol]",ba="[object WeakMap]",ya="[object ArrayBuffer]",xa="[object DataView]",_a="[object Float32Array]",va="[object Float64Array]",ja="[object Int8Array]",Ta="[object Int16Array]",$a="[object Int32Array]",Aa="[object Uint8Array]",wa="[object Uint8ClampedArray]",Oa="[object Uint16Array]",Sa="[object Uint32Array]",p={};p[mt]=p[sa]=p[ya]=p[xa]=p[ca]=p[ia]=p[_a]=p[va]=p[ja]=p[Ta]=p[$a]=p[pa]=p[da]=p[bt]=p[fa]=p[ga]=p[ma]=p[ha]=p[Aa]=p[wa]=p[Oa]=p[Sa]=!0;p[ua]=p[ht]=p[ba]=!1;function Y(e,t,r,n,l,c){var u,d=t&na,i=t&oa,s=t&aa;if(r&&(u=l?r(e,n,l,c):r(e)),u!==void 0)return u;if(!H(e))return e;var m=de(e);if(m){if(u=xo(e),!d)return Yn(e,u)}else{var h=ye(e),j=h==ht||h==la;if(nt(e))return Jn(e,d);if(h==bt||h==mt||j&&!l){if(u=i||j?{}:Yo(e),!d)return i?no(e,Kn(u,e)):Qn(e,Ln(u,e))}else{if(!p[h])return l?e:{};u=Ko(e,h,d)}}c||(c=new B);var F=c.get(e);if(F)return F;c.set(e,u),ra(e)?e.forEach(function(x){u.add(Y(x,t,r,x,e,c))}):Zo(e)&&e.forEach(function(x,b){u.set(b,Y(x,t,r,b,e,c))});var E=s?i?ao:oo:i?he:me,P=m?void 0:E(e);return Mr(P||e,function(x,b){P&&(b=x,x=e[b]),et(u,b,Y(x,t,r,b,e,c))}),u}var Ca=1,Ia=4;function k(e){return Y(e,Ca|Ia)}var S=(e=>(e.ON_ADD="add",e.ON_REMOVE="remove",e.ON_UPDATE="update",e.ON_RESET="reset",e))(S||{});const Da=_t.createContext(null),Fa=[{label:"\u5E03\u5C40",type:"radio",name:"layout",defaultValue:"single",options:[{label:"\u5355\u5217",value:"single"},{label:"\u591A\u5217",value:"multi"}]}],Ea=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Pa=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Na=[{label:"\u8868\u5355\u540D\u79F0",type:"input",name:"formName"},{label:"\u8868\u5355\u5360\u4F4D\u7B26",type:"input",name:"placeHolder"}],Ra={wrap:Fa,input:Ea,selector:Pa,"data-picker":Na};const{FormItem:Ma}=pe;function Ba({onClose:e,data:t,visible:r}){const[n,l]=$.exports.useState({}),c=$.exports.useRef(),u=async()=>{const i=c.current,[,s]=await vt(i.validate());if(s===!0){const m=i.getFieldsValue(!0);Object.assign(n.formData,m),console.log("\u8868\u5355\u9879\u4FEE\u6539\uFF1A",n),e()}},d=$.exports.useMemo(()=>{var i;return(i=Ra[n.compType])==null?void 0:i.map((s,m)=>{let h=null;const{formData:j,itemId:F}=n,E=`${F}-dispose-${m}`,{options:P,defaultValue:x}=s;switch(s.type){case"radio":h=a.exports.jsx(ve.Group,{value:j[s.name]||x,children:P.map((b,o)=>a.exports.jsx(ve,{defaultChecked:j[s.name]===b.value,value:b.value,children:b.label},`${E}-${b.value}`))});break;default:h=a.exports.jsx(Je,{})}return a.exports.jsx(Ma,{label:s.label,name:s.name,children:h},E)})},[n.compType]);return $.exports.useEffect(()=>{const{idx:i,current:s}=t;if(!s)return;const m=c.current,{formData:h}=s[i];console.log("\u5F53\u524D\u8868\u5355\uFF1A",s[i]),l(s[i]),h&&m.setFieldsValue(h)},[t,n.formData]),a.exports.jsx(Ot,{header:`${n.compName}:${n.itemId}`,visible:r,onClose:e,onConfirm:u,children:r&&a.exports.jsx("div",{className:"form-sandbox__dispose",children:a.exports.jsx(pe,{ref:c,labelAlign:"top",labelWidth:80,children:(n==null?void 0:n.compType)&&d})})})}const Ua=[{compId:"2",compName:"\u8F93\u5165\u6846",compType:"input",chosen:!1,selected:!1,itemId:"formId-Q2rezGsi",parentId:null,nodeIndex:0,formData:{},children:[]},{compId:"3",compName:"\u4E0B\u62C9\u9009\u62E9\u5668",compType:"selector",chosen:!1,selected:!1,itemId:"formId-Ed2MGdaZ",parentId:null,nodeIndex:1,formData:{},children:[]}];const La=[{compId:"1",compName:"\u6805\u683C",compType:"wrap"},{compId:"2",compName:"\u8F93\u5165\u6846",compType:"input"},{compId:"3",compName:"\u4E0B\u62C9\u9009\u62E9\u5668",compType:"selector"},{compId:"4",compName:"\u65E5\u671F\u9009\u62E9\u5668",compType:"date-picker"}],Ke="container_data",We=k(Ua),Ga={value:[],hash:{}};let q=[];function za(e,t){let r;const{eventType:n="",selected:l,toDelete:c}=t;switch(n){case S.ON_RESET:r=l;break;case S.ON_REMOVE:const i=s=>s.itemId===c.itemId&&s.parentId===c.parentId;r=q.filter(s=>!i(s));break;default:r=[...q.filter(s=>l.findIndex(m=>m.itemId===s.itemId)===-1),...l]}q=r;const[u,d]=jt(r,null);return{value:u,hash:d}}function Ya(){const[e,t]=$.exports.useState(La),[r,n]=$.exports.useReducer(za,Ga),[l,c]=$.exports.useState(!1),[u,d]=$.exports.useState({}),i=(o,g,y,_)=>{const T=y&&k(y)||null,w=o.length&&k(o)||[],W=Tt(w,T);n({eventType:g,selected:W,toDelete:_})},s=o=>{const g=o.getAttribute("comp-type");return e.find(_=>_.compType===g)},m=(o,g,y)=>{const{item:_,newDraggableIndex:T}=o,w=s(_);if(!w)return;const W=g;W.splice(T,0,w),i(W,S.ON_ADD,y)},h=(o,g,y)=>{const{newDraggableIndex:_,oldDraggableIndex:T}=o,w=$t(k(g),T,_);i(w,S.ON_UPDATE,y)},j=(o,g,y)=>{const{oldDraggableIndex:_}=o,T=g,w=T[_];T.splice(_,1),i(T,S.ON_REMOVE,y,w)},F=()=>{n({eventType:S.ON_RESET,selected:We})},E=()=>{sessionStorage.setItem(Ke,JSON.stringify(r.value))},P=()=>{},x=()=>{const o=St.confirm({header:"\u63D0\u793A",body:"\u786E\u8BA4\u91CD\u7F6E\u8868\u5355\u5417\uFF1F",theme:"warning",onConfirm:()=>{F(),o.hide()},onClose:()=>{o.hide()}})};function b(o){var g;return a.exports.jsx(te.exports.ReactSortable,{tag:"div",className:Ct("form-sandbox__payground__wrap",`form-sandbox__payground__wrap--direction--${(g=o.formData)==null?void 0:g.layout}`),group:{name:"component",pull:!0,put:!0},swap:!0,direction:"horizontal",fallbackOnBody:!0,swapThreshold:1,animation:200,list:o.children,onUpdate:y=>{console.log("child-onUpdate\u64CD\u4F5C------------------->"),h(y,o.children,o)},onAdd:y=>{console.log("child-onAdd\u64CD\u4F5C------------------->"),m(y,o.children,o)},onRemove:y=>{console.log("child-onRemove\u64CD\u4F5C------------------->"),j(y,o.children,o)},setList:()=>{},children:o.children&&je(o.children,{renderChild:b,parent:o})||null})}return $.exports.useEffect(()=>{ae.watch(g=>{console.log("\u5220\u9664\u64CD\u4F5C\u6765\u6E90\uFF1A",g),j({oldDraggableIndex:g.idx},g.current,g.parent)}),se.watch(g=>{c(!0),d(g)});const o=sessionStorage.getItem(Ke);return i(o&&JSON.parse(o)||We),()=>{q=[],i([]),ae.destroy(),se.destroy()}},[]),a.exports.jsx(Da.Provider,{value:{containerState:r},children:a.exports.jsxs("div",{className:"form-sandbox__main",children:[a.exports.jsxs("div",{className:"form-sandbox__components",children:[a.exports.jsx("p",{className:"form-sandbox__components--title",children:"\u9009\u62E9\u7EC4\u4EF6"}),a.exports.jsx(te.exports.ReactSortable,{tag:"div",group:{name:"component",pull:"clone",put:!1},sort:!1,list:e,setList:o=>{t(o)},children:e.map(o=>a.exports.jsx("div",{className:`form-sandbox__components__item form-sandbox__components--${o.compType}`,"comp-type":o.compType,children:o.compName},o.compId))})]}),a.exports.jsxs("div",{className:"form-sandbox__content",children:[a.exports.jsxs("div",{className:"form-sandbox__operation",children:[a.exports.jsx(ee,{theme:"primary",style:{marginRight:10},onClick:P,children:"\u9884\u89C8"}),a.exports.jsx(ee,{theme:"primary",style:{marginRight:10},onClick:E,children:"\u4FDD\u5B58"}),a.exports.jsx(ee,{type:"reset",onClick:x,children:"\u91CD\u7F6E"})]}),a.exports.jsx(te.exports.ReactSortable,{tag:"div",className:"form-sandbox__payground",group:{name:"component",pull:!0,put:!0},swap:!0,direction:"horizontal",fallbackOnBody:!0,swapThreshold:1,animation:200,list:r.value,onUpdate:o=>{console.log("container-onUpdate\u64CD\u4F5C------------------->"),h(o,r.value,null)},onAdd:o=>{console.log("container-onAdd\u64CD\u4F5C------------------->",o),m(o,r.value,null)},onRemove:o=>{console.log("container-onRemove\u64CD\u4F5C------------------->"),j(o,r.value,null)},setList:()=>{},children:je(r.value,{renderChild:b})})]}),a.exports.jsx(Ba,{visible:l,data:u,onClose:()=>{c(!1)}})]})})}export{Ya as default};
